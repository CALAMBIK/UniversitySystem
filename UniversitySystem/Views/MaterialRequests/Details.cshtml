@model UniversitySystem.Models.MaterialRequest
@{
    ViewData["Title"] = "Детали запроса";
}

<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="card bg-info text-white mb-4">
                <div class="card-body">
                    <h1 class="card-title">
                         Детали запроса
                    </h1>
                    <p class="card-text">Информация о вашем запросе на учебные материалы</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"> Основная информация</h5>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <th width="30%">Название:</th>
                            <td><strong>@Model.Title</strong></td>
                        </tr>
                        <tr>
                            <th>Тип материала:</th>
                            <td><span class="badge bg-info">@Model.MaterialType</span></td>
                        </tr>
                        <tr>
                            <th>Описание:</th>
                            <td>@Model.Description</td>
                        </tr>
                        <tr>
                            <th>Дата создания:</th>
                            <td>@Model.CreatedDate.ToString("dd.MM.yyyy HH:mm")</td>
                        </tr>
                        @if (!string.IsNullOrEmpty(Model.FileUrl))
                        {
                            <tr>
                                <th>Ссылка на файл:</th>
                                <td>
                                    <a href="@Model.FileUrl" target="_blank" class="btn btn-sm btn-outline-primary">
                                         Открыть
                                    </a>
                                </td>
                            </tr>
                        }
                    </table>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"> Статус запроса</h5>
                </div>
                <div class="card-body text-center">
                    @switch (Model.Status)
                    {
                        case "Pending":
                            <div class="alert alert-warning">
                                <h5> На рассмотрении</h5>
                                <p class="mb-0">Запрос ожидает обработки администратором</p>
                            </div>
                            break;
                        case "Approved":
                            <div class="alert alert-success">
                                <h5> Одобрен</h5>
                                <p class="mb-0">Запрос принят к исполнению</p>
                                @if (Model.ProcessedDate.HasValue)
                                {
                                    <small>Обработан: @Model.ProcessedDate.Value.ToString("dd.MM.yyyy HH:mm")</small>
                                }
                            </div>
                            break;
                        case "Rejected":
                            <div class="alert alert-danger">
                                <h5> Отклонен</h5>
                                <p class="mb-0">Запрос не может быть выполнен</p>
                                @if (Model.ProcessedDate.HasValue)
                                {
                                    <small>Обработан: @Model.ProcessedDate.Value.ToString("dd.MM.yyyy HH:mm")</small>
                                }
                            </div>
                            break;
                        case "Completed":
                            <div class="alert alert-primary">
                                <h5> Выполнен</h5>
                                <p class="mb-0">Материал предоставлен</p>
                                @if (Model.CompletedDate.HasValue)
                                {
                                    <small>Завершен: @Model.CompletedDate.Value.ToString("dd.MM.yyyy HH:mm")</small>
                                }
                            </div>
                            break;
                    }

                    @if (!string.IsNullOrEmpty(Model.AdminComment))
                    {
                        <div class="mt-3">
                            <h6>Комментарий администратора:</h6>
                            <div class="alert alert-secondary">
                                @Model.AdminComment
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <a href="@Url.Action("MyRequests", "MaterialRequests")" class="btn btn-secondary me-md-2">
                     Назад к списку
                </a>
                <a href="@Url.Action("Create", "MaterialRequests")" class="btn btn-success">
                     Новый запрос
                </a>
            </div>
        </div>
    </div>
</div>